<html>
<head>
<title>QR Generator Prototype</title>
</head>

<body>

<div id= "userid">User ID: 123456789</div>
<div id= "time">Time:</div>
<div id= "HMAC">HMAC:</div>
<div id="qrcode" style="width:100px; height:100px; margin-top:15px;"></div>

<script src="lib/CryptoJS v3/rollups/hmac-sha1.js"></script>
<script src="lib/davidshimjs-qrcodejs-07f829d/qrcode.js"></script>

<script type="text/javascript">
var userid= "1234567890";
var timestamp;
var message;
var passphrase= "1337password";
var hash;
var qrcode = new QRCode(document.getElementById("qrcode"), {
	width : 100,
	height : 100,
	correctLevel: QRCode.CorrectLevel.L
});

function updateTimeQR() {
	qrcode.clear();
	timestamp= Date.now();
	message= userid+timestamp;
	hash= CryptoJS.HmacSHA1(message, passphrase);
	document.getElementById("time").innerHTML="Time: " + timestamp;
	document.getElementById("HMAC").innerHTML="HMAC: " + hash;
	qrcode.makeCode(message);
}
updateTimeQR();
setInterval("updateTimeQR()",5000)

</script>


</body>
</html>